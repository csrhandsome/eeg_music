<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 样式现在统一在外部CSS文件中管理 -->
    <title>EEG音乐系统 - 录制页面</title>
    <!-- 引入 P5.js -->
    <script src="p5.min.js"></script>
    <!-- 引入 Socket.IO 客户端库 -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <!-- 引入独立的CSS文件 -->
    <link rel="stylesheet" href="styles/music_game_p5.css">
    <!-- 引入双层堆叠按钮样式 -->
    <link rel="stylesheet" href="styles/stacked-button.css">
    <!-- 引入背景样式 -->
    <link rel="stylesheet" href="styles/body_background.css">
    <!-- 引入背景增强脚本 -->
    <script src="scripts/background_enhancer.js"></script>
    <!-- 引入录制页面导航样式 -->
    <link rel="stylesheet" href="styles/record_navigation.css">
    <!-- 引入心音轨迹页面样式 -->
    <link rel="stylesheet" href="styles/history.css">
    <!-- 引入音符SVG资源 -->
    <script src="assets/notes.js"></script>
</head>

<body>
    <!-- P5.js 画布容器 -->
    <div id="p5-canvas-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;"></div>
    
    <!-- 左上角控制按钮 -->
    <button  onclick="goToWelcomepage()" title="返回播放页面" style="position: fixed; top: 20px; left: 20px; z-index: 1000; background: transparent; border: none; padding: 0;">
        <img src="assets/back.svg" alt="返回" />
    </button>

    <!-- 心音轨迹文件列表容器 -->
    <div class="history-container">
        <div class="file-list-container" id="file-list">
        </div>
    </div>

    <!-- 通用浮动控制栏 -->
    <div class="mobile-control-bar">
        <div class="stacked-button-container control-bar" id="button-group-container">
            <div class="stacked-button-bottom control-bar"></div>
            <div class="stacked-button-top control-bar">
                <div class="button-group-content">
                    <div class="action-button primary" onclick="goToPlay()" role="button" tabindex="0">
                        <img src="assets/music.svg" alt="音乐" style="width: 16px; height: 16px;" />
                        <span>心音演奏</span>
                    </div>
                    <div class="action-button secondary" onclick="goToHistory()" role="button" tabindex="0">
                        <img src="assets/history.svg" alt="心音轨迹" style="width: 16px; height: 16px;" />
                        <span>心音轨迹</span>
                    </div>
                </div>
            </div>
        </div> 
    </div> 
    
    <!-- 引入音游P5.js可视化逻辑 -->
    <script src="scripts/music_game_p5.js"></script>
    <script src="scripts/music_game_p5_script.js"></script>
    <!-- 引入心音轨迹页面脚本 -->
    <script src="scripts/history.js"></script>
</body>
</html>